<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Logging · BazerUtils.jl</title><meta name="title" content="Logging · BazerUtils.jl"/><meta property="og:title" content="Logging · BazerUtils.jl"/><meta property="twitter:title" content="Logging · BazerUtils.jl"/><meta name="description" content="Documentation for BazerUtils.jl."/><meta property="og:description" content="Documentation for BazerUtils.jl."/><meta property="twitter:description" content="Documentation for BazerUtils.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">BazerUtils.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Logging</a><ul class="internal"><li><a class="tocitem" href="#Basic-usage"><span>Basic usage</span></a></li><li><a class="tocitem" href="#Options"><span>Options</span></a></li><li><a class="tocitem" href="#Other"><span>Other</span></a></li></ul></li><li><a class="tocitem" href="../read_jsonl/">Working with JSON Lines Files</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/public/">Public Interface</a></li><li><a class="tocitem" href="../../lib/internals/">Package Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Logging</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Logging</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/LouLouLibs/BazerUtils.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/LouLouLibs/BazerUtils.jl/blob/main/docs/src/man/logger_guide.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Logging"><a class="docs-heading-anchor" href="#Logging">Logging</a><a id="Logging-1"></a><a class="docs-heading-anchor-permalink" href="#Logging" title="Permalink"></a></h1><p>The function <code>custom_logger</code> is a wrapper over the <code>Logging.jl</code> and <code>LoggingExtras.jl</code> libraries. I made them such that I could fine tune the type of log I use repeatedly across projects. </p><p>The things I find most useful:</p><ol><li>four different log files for each different level of logging from <em>error</em> to <em>debug</em></li><li>pretty (to me) formatting for stdout but also an option to have <code>log4j</code> style formatting in the files</li><li>filtering out messages of verbose packages (<code>TranscodingStreams</code>, etc...) which sometimes slows down julia because of excessive logging.</li></ol><p>There are still a few things that might be useful down the line: (1) a catch-all log file where filters do not apply; (2) filtering out specific functions of packages; </p><p>Overall this is working fine for me.</p><h2 id="Basic-usage"><a class="docs-heading-anchor" href="#Basic-usage">Basic usage</a><a id="Basic-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-usage" title="Permalink"></a></h2><p>Say at the beginning of a script you would have something like:</p><pre><code class="language-julia hljs">using BazerUtils
custom_logger(&quot;/tmp/log_test&quot;; 
    filtered_modules_all=[:StatsModels, :TranscodingStreams, :Parquet2], 
    create_log_files=true, 
    overwrite=true, 
    log_format = :log4j);
  
┌ Info: Creating four different files for logging ...
│  ⮑  /tmp/log_test_error.log
│      /tmp/log_test_warn.log
│      /tmp/log_test_info.log
└      /tmp/log_test_debug.log</code></pre><p>The REPL will see all messages above debug level:</p><pre><code class="language-julia hljs">&gt; @error &quot;This is an error level message&quot;
┌ [08:28:08 2025-02-12] ERROR |  @ Main[REPL[17]:1]
└ This is an error level message

&gt; @warn &quot;This is an warn level message&quot;
┌ [08:28:08 2025-02-12] WARN  |  @ Main[REPL[18]:1]
└ This is an warn level message

&gt; @info &quot;This is an info level message&quot;
┌ [08:28:08 2025-02-12] INFO  |  @ Main[REPL[19]:1]
└ This is an info level message

&gt; @debug &quot;This is an debug level message&quot;
</code></pre><p>Then each of the respective log-levels will be redirected to the individual files and if the log4j option was specified they will look like something like this</p><pre><code class="language-log4j hljs">2025-02-12 08:28:08 ERROR Main[REPL[17]:1] - This is an error level message
2025-02-12 08:28:08 WARN  Main[REPL[18]:1] - This is an warn level message
2025-02-12 08:28:08 INFO  Main[REPL[19]:1] - This is an info level message
2025-02-12 08:28:08 DEBUG Main[REPL[20]:1] - This is an debug level message</code></pre><h2 id="Options"><a class="docs-heading-anchor" href="#Options">Options</a><a id="Options-1"></a><a class="docs-heading-anchor-permalink" href="#Options" title="Permalink"></a></h2><h3 id="Formatting"><a class="docs-heading-anchor" href="#Formatting">Formatting</a><a id="Formatting-1"></a><a class="docs-heading-anchor-permalink" href="#Formatting" title="Permalink"></a></h3><p>The <code>log_format</code> is <code>log4j</code> by default (only for the files).  The only other option for now is <code>pretty</code> which uses the format I wrote for the REPL; note that it is a little cumbersome for files especially since you have to make sure your editor has the ansi interpreter on. </p><h3 id="Files"><a class="docs-heading-anchor" href="#Files">Files</a><a id="Files-1"></a><a class="docs-heading-anchor-permalink" href="#Files" title="Permalink"></a></h3><p>The default is to create one file for each level.  There is an option to only create one file for each level and keep things a little tidier in your directories:</p><pre><code class="language-julia hljs">&gt; custom_logger(&quot;/tmp/log_test&quot;;  
    create_log_files=false, overwrite=true, log_format = :log4j);

&gt; @error &quot;This is an error level message&quot; 
&gt; @warn &quot;This is an warn level message&quot;
&gt; @info &quot;This is an info level message&quot;
&gt; @debug &quot;This is an debug level message&quot;</code></pre><p>And then the file <code>/tmp/log_test</code> has the following:</p><pre><code class="language-log4j hljs">2025-02-12 08:37:29 ERROR Main[REPL[22]:1] - This is an error level message
2025-02-12 08:37:29 WARN  Main[REPL[23]:1] - This is an warn level message
2025-02-12 08:37:29 INFO  Main[REPL[24]:1] - This is an info level message
2025-02-12 08:37:29 DEBUG Main[REPL[25]:1] - This is an debug level message</code></pre><p>Now imagine you want to keep the same log file but for a different script.  You can use the same logger option with the <code>overwrite=false</code> option:</p><pre><code class="language-julia hljs">&gt; custom_logger(&quot;/tmp/log_test&quot;;  
    create_log_files=false, overwrite=false, log_format = :log4j);

&gt; @error &quot;This is an error level message from a different script and new logger&quot; </code></pre><h3 id="Filtering"><a class="docs-heading-anchor" href="#Filtering">Filtering</a><a id="Filtering-1"></a><a class="docs-heading-anchor-permalink" href="#Filtering" title="Permalink"></a></h3><ul><li><code>filtered_modules_specific::Vector{Symbol}=nothing</code>: which modules do you want to filter out of logging (only for info and stdout) Some packages just write too much log ... filter them out but still be able to check them out in other logs</li><li><code>filtered_modules_all::Vector{Symbol}=nothing</code>: which modules do you want to filter out of logging (across all logs)  Examples could be TranscodingStreams (noticed that it writes so much to logs that it sometimes slows down I/O)</li></ul><h2 id="Other"><a class="docs-heading-anchor" href="#Other">Other</a><a id="Other-1"></a><a class="docs-heading-anchor-permalink" href="#Other" title="Permalink"></a></h2><p>For <code>log4j</code> I do modify the message string to fit on one line.  You will find that the &quot;\n&quot; is now replaced by &quot; | &quot;; I guess I could have an option for which character delimitates lines, but this seems too fussy.</p><p>I am trying to have a path shortener that would allow to reduce the path of the function to a fixed size. The cost is that path will no longer be &quot;clickable&quot; but we would keep things tidy as messages will all start at the same column. (see the <code>shorten_path_str</code> function).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../read_jsonl/">Working with JSON Lines Files »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Thursday 5 June 2025 21:06">Thursday 5 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
